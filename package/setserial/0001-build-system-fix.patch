Install the setserial program in /usr/bin instead of /bin, and make
sure that the directories (especially the manpages directory) are
created before installing files to them. This is similar to what
automake does.

Also remove CXXFLAGS and its use since the linker errors out with:

  cannot find @CXXFLAGS@: No such file or directory

Additionally, remove the strip command made on the wrong file.

Signed-off-by: Thomas Petazzoni <thomas.petazzoni@free-electrons.com>
[rebased on top of Debian's setserial_2.17-57.debian.tar.xz instead of relying
 on deletion of 01_makefile.patch]
[extend commit log to explain why CXXFLAGS is removed and also that strip is
 removed on purpose, c.f. original commit aaa2b660a9f9 ("setserial: convert to
 autotargets and fix manpages install")]
Signed-off-by: Quentin Schulz <quentin.schulz@cherry.de>
---
 Makefile.in |    7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

Index: setserial-2.17/Makefile.in
===================================================================
--- setserial-2.17.orig/Makefile.in
+++ setserial-2.17/Makefile.in
@@ -15,7 +15,6 @@ RM = rm -f
 CFLAGS = @CFLAGS@
 LDFLAGS = @LDFLAGS@
 CPPFLAGS = @CPPFLAGS@
-CXXFLAGS = @CXXFLAGS@
 DEFS = @DEFS@
 INCS = -I.
 TAR = tar
@@ -23,14 +22,15 @@ TAR = tar
 all: setserial setserial.cat
 
 setserial: setserial.c
-	$(CC) $(CFLAGS) $(CXXFLAGS) $(CPPFLAGS) $(LDFLAGS) $(DEFS) $(INCS) setserial.c -o setserial
+	$(CC) $(CFLAGS) $(CPPFLAGS) $(LDFLAGS) $(DEFS) $(INCS) setserial.c -o setserial
 
 setserial.cat: setserial.8
 	nroff -man setserial.8 > setserial.cat
 
 install: setserial setserial.8
-	$(INSTALL_PROGRAM) setserial $(DESTDIR)/bin
-	$(STRIP) $(DESTDIR)/bin/setserial
+	mkdir -p $(DESTDIR)/usr/bin
+	$(INSTALL_PROGRAM) setserial $(DESTDIR)/usr/bin
+	mkdir -p $(DESTDIR)/usr/share/man/man8
 	$(INSTALL_DATA) setserial.8 $(DESTDIR)/usr/share/man/man8
 
 clean:
